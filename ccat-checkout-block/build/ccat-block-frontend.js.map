{"version":3,"file":"ccat-block-frontend.js","mappings":"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","sources":["webpack://ccat-checkout-block/./node_modules/react/cjs/react-jsx-runtime.production.min.js","webpack://ccat-checkout-block/./node_modules/react/jsx-runtime.js","webpack://ccat-checkout-block/external window \"React\"","webpack://ccat-checkout-block/webpack/bootstrap","webpack://ccat-checkout-block/external window [\"wc\",\"blocksCheckout\"]","webpack://ccat-checkout-block/external window [\"wp\",\"element\"]","webpack://ccat-checkout-block/external window [\"wp\",\"i18n\"]","webpack://ccat-checkout-block/./src/js/ccat-block/block.js","webpack://ccat-checkout-block/./src/js/ccat-block/frontend.js"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","module.exports = window[\"React\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wc\"][\"blocksCheckout\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","import {useState} from '@wordpress/element';\r\nimport {__} from '@wordpress/i18n';\r\n\r\nlet defaultInvoiceData = {\r\n    vehicle_type: '1',\r\n    cloud_invoice_type: 'member',\r\n    vehicle_barcode: '',\r\n    certificate_number: '',\r\n    donate_invoice: '0',\r\n    love_code: '',\r\n    buyer_bill_no: '',\r\n    buyer_invoice_title: ''\r\n};\r\nexport const Block = ({checkoutExtensionData}) => {\r\n    const [invoiceData, setInvoiceData] = useState(defaultInvoiceData);\r\n\r\n    // 載具類型選項\r\n    const vehicleTypes = [\r\n        {value: '1', label: __('個人雲端發票', 'woocommerce')},\r\n        {value: '2', label: __('發票捐贈', 'woocommerce')},\r\n        {value: '3', label: __('公司發票', 'woocommerce')},\r\n    ];\r\n\r\n    const cloudInvoiceTypes = [\r\n        {value: 'member', label: __('會員載具', 'woocommerce')},\r\n        {value: 'mobile', label: __('手機條碼載具', 'woocommerce')},\r\n        {value: 'certificate', label: __('自然人憑證載具', 'woocommerce')},\r\n    ];\r\n\r\n\r\n    const handleInputChange = (field, value) => {\r\n        const newInvoiceData = {\r\n            ...invoiceData,\r\n            [field]: value\r\n        };\r\n\r\n        setInvoiceData(newInvoiceData);\r\n        sessionStorage.setItem('wc_invoice_data', JSON.stringify(newInvoiceData));\r\n    };\r\n\r\n    return (\r\n        <div className=\"wc-block-components-panel\">\r\n            <h2 className=\"wc-block-components-title\">{__('電子發票資訊', 'woocommerce')}</h2>\r\n\r\n            {/* 發票類型 */}\r\n            <div className=\"wc-blocks-components-select\">\r\n                <div className=\"wc-blocks-components-select__container\">\r\n                    <label className=\"wc-blocks-components-select__label\">{__('發票類型', 'woocommerce')}</label>\r\n                    <select\r\n                        name=\"vehicle_type\" id=\"vehicle_type\"\r\n                        className=\"wc-blocks-components-select__select\"\r\n                        value={invoiceData.vehicle_type}\r\n                        onChange={(e) => handleInputChange('vehicle_type', e.target.value)}\r\n                    >\r\n                        {vehicleTypes.map(type => (\r\n                            <option key={type.value} value={type.value}>\r\n                                {type.label}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            {/* 個人雲端發票子選項 */}\r\n            {invoiceData.vehicle_type === '1' && (\r\n                <>\r\n                    <div className=\"wc-blocks-components-select\">\r\n                        <div className=\"wc-blocks-components-select__container\">\r\n                            <label className=\"wc-blocks-components-select__label\">\r\n                                {__('載具類型', 'woocommerce')}\r\n                            </label>\r\n                            <select\r\n                                name=\"cloud_invoice_type\" id=\"cloud_invoice_type\"\r\n                                className=\"wc-blocks-components-select__select\"\r\n                                value={invoiceData.cloud_invoice_type}\r\n                                onChange={(e) => handleInputChange('cloud_invoice_type', e.target.value)}\r\n                            >\r\n                                {cloudInvoiceTypes.map(type => (\r\n                                    <option key={type.value} value={type.value}>\r\n                                        {type.label}\r\n                                    </option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* 手機條碼載具輸入框 */}\r\n                    {invoiceData.cloud_invoice_type === 'mobile' && (\r\n                        <div className=\"wc-block-components-text-input is-active\">\r\n                            <input\r\n                                name=\"vehicle_barcode\" id=\"vehicle_barcode\"\r\n                                type=\"text\"\r\n                                maxLength=\"8\"\r\n                                value={invoiceData.vehicle_barcode}\r\n                                onChange={(e) => handleInputChange('vehicle_barcode', e.target.value)}\r\n                            />\r\n                            <label>{__('手機條碼', 'woocommerce')}</label>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* 自然人憑證載具輸入框 */}\r\n                    {invoiceData.cloud_invoice_type === 'certificate' && (\r\n                        <div className=\"wc-block-components-text-input is-active\">\r\n                            <input\r\n                                name=\"certificate_number\" id=\"certificate_number\"\r\n                                type=\"text\"\r\n                                maxLength=\"16\"\r\n                                value={invoiceData.certificate_number}\r\n                                onChange={(e) => handleInputChange('certificate_number', e.target.value)}\r\n                            />\r\n                            <label>{__('自然人憑證號碼', 'woocommerce')}</label>\r\n                        </div>\r\n                    )}\r\n                </>\r\n            )}\r\n\r\n            {/* 愛心碼 */}\r\n            {invoiceData.vehicle_type === '2' && (\r\n                <div className=\"wc-block-components-text-input is-active\">\r\n                    <input\r\n                        name=\"love_code\" id=\"love_code\"\r\n                        type=\"text\"\r\n                        maxLength=\"20\"\r\n                        placeholder=\"預設：創世基金會919\"\r\n                        value={invoiceData.love_code}\r\n                        onChange={(e) => handleInputChange('love_code', e.target.value)}\r\n                    />\r\n                    <label>{__('愛心碼', 'woocommerce')}</label>\r\n                </div>\r\n            )}\r\n\r\n            {invoiceData.vehicle_type === '3' && (\r\n                <>\r\n                    <div className=\"wc-block-components-text-input is-active\">\r\n                        <input\r\n                            name=\"buyer_bill_no\" id=\"buyer_bill_no\"\r\n                            type=\"text\"\r\n                            maxLength=\"8\"\r\n                            value={invoiceData.buyer_bill_no}\r\n                            onChange={(e) => handleInputChange('buyer_bill_no', e.target.value)}\r\n                        />\r\n                        <label>{__('統一編號', 'woocommerce')}</label>\r\n                    </div>\r\n\r\n                    <div className=\"wc-block-components-text-input is-active\">\r\n                        <input\r\n                            name=\"buyer_invoice_title\" id=\"buyer_invoice_title\"\r\n                            type=\"text\"\r\n                            maxLength=\"161\"\r\n                            value={invoiceData.buyer_invoice_title}\r\n                            onChange={(e) => handleInputChange('buyer_invoice_title', e.target.value)}\r\n                        />\r\n                        <label>{__('發票抬頭', 'woocommerce')}</label>\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst originalFetch = window.fetch;\r\nwindow.fetch = async (...args) => {\r\n    const [resource, config] = args;\r\n\r\n    // 檢查是否是結帳請求\r\n    if (resource.includes('/wc/store/v1/checkout')) {\r\n        const invoiceData = sessionStorage.getItem('wc_invoice_data')\r\n            ? JSON.parse(sessionStorage.getItem('wc_invoice_data'))\r\n            : defaultInvoiceData;\r\n\r\n        // 修改請求資料\r\n        const body = JSON.parse(config.body);\r\n        body.extensions = {\r\n            ...body.extensions,\r\n            'ccat_invoice_data': invoiceData\r\n        };\r\n\r\n        config.body = JSON.stringify(body);\r\n    }\r\n\r\n    return originalFetch(resource, config);\r\n};","import {registerCheckoutBlock} from '@woocommerce/blocks-checkout'\r\n\r\nimport {Block} from './block'\r\nimport metadata from './block.json'\r\n\r\nregisterCheckoutBlock({\r\n    metadata,\r\n    component: Block,\r\n});"],"names":["f","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","exports","Fragment","jsx","jsxs","module","window","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","defaultInvoiceData","vehicle_type","cloud_invoice_type","vehicle_barcode","certificate_number","donate_invoice","love_code","buyer_bill_no","buyer_invoice_title","originalFetch","fetch","async","args","resource","config","includes","invoiceData","sessionStorage","getItem","JSON","parse","body","extensions","stringify","registerCheckoutBlock","metadata","component","Block","checkoutExtensionData","setInvoiceData","useState","vehicleTypes","value","label","__","cloudInvoiceTypes","handleInputChange","field","newInvoiceData","setItem","_jsxs","className","children","_jsx","name","id","onChange","target","map","_Fragment","maxLength","placeholder"],"sourceRoot":""}