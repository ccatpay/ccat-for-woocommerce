(()=>{"use strict";var e={20:(e,c,t)=>{var o=t(609),n=Symbol.for("react.element"),l=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function s(e,c,t){var o,l={},s=null,_=null;for(o in void 0!==t&&(s=""+t),void 0!==c.key&&(s=""+c.key),void 0!==c.ref&&(_=c.ref),c)i.call(c,o)&&!r.hasOwnProperty(o)&&(l[o]=c[o]);if(e&&e.defaultProps)for(o in c=e.defaultProps)void 0===l[o]&&(l[o]=c[o]);return{$$typeof:n,type:e,key:s,ref:_,props:l,_owner:a.current}}c.Fragment=l,c.jsx=s,c.jsxs=s},848:(e,c,t)=>{e.exports=t(20)},609:e=>{e.exports=window.React}},c={};const t=window.wc.blocksCheckout,o=window.wp.element,n=window.wp.i18n,l=(window.ccatInstance||(window.ccatInstance=function(){const e=window.fetch,c=[];async function t(...t){let[o,n]=t;for(const e of c)try{const c=await e(o,n);c&&([o,n]=c)}catch(e){console.error("執行攔截器時發生錯誤:",e)}return e(o,n)}let o=!1;return{init:function(){return o||(window.fetch=t,o=!0,console.log("Fetch 攔截器已初始化")),this},register:function(e){if("function"==typeof e)return c.push(e),()=>this.unregister(e);console.error("攔截器必須是函數")},unregister:function(e){const t=c.indexOf(e);return-1!==t&&(c.splice(t,1),!0)},getInterceptorCount:function(){return c.length}}}(),window.ccatInstance.init()),window.ccatInstance);var i=function t(o){var n=c[o];if(void 0!==n)return n.exports;var l=c[o]={exports:{}};return e[o](l,l.exports,t),l.exports}(848);let a={vehicle_type:"1",cloud_invoice_type:"member",vehicle_barcode:"",certificate_number:"",donate_invoice:"0",love_code:"",buyer_bill_no:"",buyer_invoice_title:""};l.register((async(e,c)=>{if(e.includes("/wc/store/v1/checkout")&&c.body){const e=sessionStorage.getItem("wc_invoice_data")?JSON.parse(sessionStorage.getItem("wc_invoice_data")):a,t=JSON.parse(c.body);t.extensions={...t.extensions,ccat_invoice_data:e},c.body=JSON.stringify(t)}return[e,c]}));const r=JSON.parse('{"apiVersion":2,"title":"ccat-for-woocommerce/ccat-block","name":"ccat-for-woocommerce/ccat-block","version":"1.0.0","category":"woocommerce","supports":{"html":false,"align":false,"multiple":false,"reusable":false},"parent":["woocommerce/checkout-contact-information-block"],"attributes":{"lock":{"type":"object","default":{"remove":true,"move":true}},"text":{"type":"string","default":""}},"textdomain":"ccat-for-woocommerce"}');(0,t.registerCheckoutBlock)({metadata:r,component:({checkoutExtensionData:e})=>{const[c,t]=(0,o.useState)(a),l=[{value:"1",label:(0,n.__)("個人雲端發票","woocommerce")},{value:"2",label:(0,n.__)("發票捐贈","woocommerce")},{value:"3",label:(0,n.__)("公司發票","woocommerce")}],r=[{value:"member",label:(0,n.__)("會員載具","woocommerce")},{value:"mobile",label:(0,n.__)("手機條碼載具","woocommerce")},{value:"certificate",label:(0,n.__)("自然人憑證載具","woocommerce")}],s=(e,o)=>{const n={...c,[e]:o};t(n),sessionStorage.setItem("wc_invoice_data",JSON.stringify(n))};return(0,i.jsxs)("div",{className:"wc-block-components-panel",children:[(0,i.jsx)("h2",{className:"wc-block-components-title",children:(0,n.__)("電子發票資訊","woocommerce")}),(0,i.jsx)("div",{className:"wc-blocks-components-select",children:(0,i.jsxs)("div",{className:"wc-blocks-components-select__container",children:[(0,i.jsx)("label",{className:"wc-blocks-components-select__label",children:(0,n.__)("發票類型","woocommerce")}),(0,i.jsx)("select",{name:"vehicle_type",id:"vehicle_type",className:"wc-blocks-components-select__select",value:c.vehicle_type,onChange:e=>s("vehicle_type",e.target.value),children:l.map((e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value)))})]})}),"1"===c.vehicle_type&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"wc-blocks-components-select",children:(0,i.jsxs)("div",{className:"wc-blocks-components-select__container",children:[(0,i.jsx)("label",{className:"wc-blocks-components-select__label",children:(0,n.__)("載具類型","woocommerce")}),(0,i.jsx)("select",{name:"cloud_invoice_type",id:"cloud_invoice_type",className:"wc-blocks-components-select__select",value:c.cloud_invoice_type,onChange:e=>s("cloud_invoice_type",e.target.value),children:r.map((e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value)))})]})}),"mobile"===c.cloud_invoice_type&&(0,i.jsxs)("div",{className:"wc-block-components-text-input is-active",children:[(0,i.jsx)("input",{name:"vehicle_barcode",id:"vehicle_barcode",type:"text",maxLength:"8",value:c.vehicle_barcode,onChange:e=>s("vehicle_barcode",e.target.value)}),(0,i.jsx)("label",{children:(0,n.__)("手機條碼","woocommerce")})]}),"certificate"===c.cloud_invoice_type&&(0,i.jsxs)("div",{className:"wc-block-components-text-input is-active",children:[(0,i.jsx)("input",{name:"certificate_number",id:"certificate_number",type:"text",maxLength:"16",value:c.certificate_number,onChange:e=>s("certificate_number",e.target.value)}),(0,i.jsx)("label",{children:(0,n.__)("自然人憑證號碼","woocommerce")})]})]}),"2"===c.vehicle_type&&(0,i.jsxs)("div",{className:"wc-block-components-text-input is-active",children:[(0,i.jsx)("input",{name:"love_code",id:"love_code",type:"text",maxLength:"20",placeholder:"預設：創世基金會919",value:c.love_code,onChange:e=>s("love_code",e.target.value)}),(0,i.jsx)("label",{children:(0,n.__)("愛心碼","woocommerce")})]}),"3"===c.vehicle_type&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"wc-block-components-text-input is-active",children:[(0,i.jsx)("input",{name:"buyer_bill_no",id:"buyer_bill_no",type:"text",maxLength:"8",value:c.buyer_bill_no,onChange:e=>s("buyer_bill_no",e.target.value)}),(0,i.jsx)("label",{children:(0,n.__)("統一編號","woocommerce")})]}),(0,i.jsxs)("div",{className:"wc-block-components-text-input is-active",children:[(0,i.jsx)("input",{name:"buyer_invoice_title",id:"buyer_invoice_title",type:"text",maxLength:"161",value:c.buyer_invoice_title,onChange:e=>s("buyer_invoice_title",e.target.value)}),(0,i.jsx)("label",{children:(0,n.__)("發票抬頭","woocommerce")})]})]})]})}})})();
//# sourceMappingURL=ccat-block-frontend.js.map