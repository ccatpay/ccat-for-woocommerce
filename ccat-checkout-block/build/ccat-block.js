(()=>{"use strict";var e={20:(e,c,t)=>{var o=t(609),n=Symbol.for("react.element"),l=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function r(e,c,t){var o,l={},r=null,_=null;for(o in void 0!==t&&(r=""+t),void 0!==c.key&&(r=""+c.key),void 0!==c.ref&&(_=c.ref),c)i.call(c,o)&&!a.hasOwnProperty(o)&&(l[o]=c[o]);if(e&&e.defaultProps)for(o in c=e.defaultProps)void 0===l[o]&&(l[o]=c[o]);return{$$typeof:n,type:e,key:r,ref:_,props:l,_owner:s.current}}c.Fragment=l,c.jsx=r,c.jsxs=r},848:(e,c,t)=>{e.exports=t(20)},609:e=>{e.exports=window.React}},c={};const t=window.wp.element,o=window.wp.i18n,n=(window.ccatInstance||(window.ccatInstance=function(){const e=window.fetch,c=[];async function t(...t){let[o,n]=t;for(const e of c)try{const c=await e(o,n);c&&([o,n]=c)}catch(e){console.error("執行攔截器時發生錯誤:",e)}return e(o,n)}let o=!1;return{init:function(){return o||(window.fetch=t,o=!0,console.log("Fetch 攔截器已初始化")),this},register:function(e){if("function"==typeof e)return c.push(e),()=>this.unregister(e);console.error("攔截器必須是函數")},unregister:function(e){const t=c.indexOf(e);return-1!==t&&(c.splice(t,1),!0)},getInterceptorCount:function(){return c.length}}}(),window.ccatInstance.init()),window.ccatInstance);var l=function t(o){var n=c[o];if(void 0!==n)return n.exports;var l=c[o]={exports:{}};return e[o](l,l.exports,t),l.exports}(848);let i={vehicle_type:"1",cloud_invoice_type:"member",vehicle_barcode:"",certificate_number:"",donate_invoice:"0",love_code:"",buyer_bill_no:"",buyer_invoice_title:""};n.register((async(e,c)=>{if(e.includes("/wc/store/v1/checkout")&&c.body){const e=sessionStorage.getItem("wc_invoice_data")?JSON.parse(sessionStorage.getItem("wc_invoice_data")):i,t=JSON.parse(c.body);t.extensions={...t.extensions,ccat_invoice_data:e},c.body=JSON.stringify(t)}return[e,c]}));const s=JSON.parse('{"name":"ccat-for-woocommerce/ccat-block"}');(0,window.wp.blocks.registerBlockType)(s.name,{edit:({checkoutExtensionData:e})=>{const[c,n]=(0,t.useState)(i),s=[{value:"1",label:(0,o.__)("個人雲端發票","woocommerce")},{value:"2",label:(0,o.__)("發票捐贈","woocommerce")},{value:"3",label:(0,o.__)("公司發票","woocommerce")}],a=[{value:"member",label:(0,o.__)("會員載具","woocommerce")},{value:"mobile",label:(0,o.__)("手機條碼載具","woocommerce")},{value:"certificate",label:(0,o.__)("自然人憑證載具","woocommerce")}],r=(e,t)=>{const o={...c,[e]:t};n(o),sessionStorage.setItem("wc_invoice_data",JSON.stringify(o))};return(0,l.jsxs)("div",{className:"wc-block-components-panel",children:[(0,l.jsx)("h2",{className:"wc-block-components-title",children:(0,o.__)("電子發票資訊","woocommerce")}),(0,l.jsx)("div",{className:"wc-blocks-components-select",children:(0,l.jsxs)("div",{className:"wc-blocks-components-select__container",children:[(0,l.jsx)("label",{className:"wc-blocks-components-select__label",children:(0,o.__)("發票類型","woocommerce")}),(0,l.jsx)("select",{name:"vehicle_type",id:"vehicle_type",className:"wc-blocks-components-select__select",value:c.vehicle_type,onChange:e=>r("vehicle_type",e.target.value),children:s.map((e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value)))})]})}),"1"===c.vehicle_type&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"wc-blocks-components-select",children:(0,l.jsxs)("div",{className:"wc-blocks-components-select__container",children:[(0,l.jsx)("label",{className:"wc-blocks-components-select__label",children:(0,o.__)("載具類型","woocommerce")}),(0,l.jsx)("select",{name:"cloud_invoice_type",id:"cloud_invoice_type",className:"wc-blocks-components-select__select",value:c.cloud_invoice_type,onChange:e=>r("cloud_invoice_type",e.target.value),children:a.map((e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value)))})]})}),"mobile"===c.cloud_invoice_type&&(0,l.jsxs)("div",{className:"wc-block-components-text-input is-active",children:[(0,l.jsx)("input",{name:"vehicle_barcode",id:"vehicle_barcode",type:"text",maxLength:"8",value:c.vehicle_barcode,onChange:e=>r("vehicle_barcode",e.target.value)}),(0,l.jsx)("label",{children:(0,o.__)("手機條碼","woocommerce")})]}),"certificate"===c.cloud_invoice_type&&(0,l.jsxs)("div",{className:"wc-block-components-text-input is-active",children:[(0,l.jsx)("input",{name:"certificate_number",id:"certificate_number",type:"text",maxLength:"16",value:c.certificate_number,onChange:e=>r("certificate_number",e.target.value)}),(0,l.jsx)("label",{children:(0,o.__)("自然人憑證號碼","woocommerce")})]})]}),"2"===c.vehicle_type&&(0,l.jsxs)("div",{className:"wc-block-components-text-input is-active",children:[(0,l.jsx)("input",{name:"love_code",id:"love_code",type:"text",maxLength:"20",placeholder:"預設：創世基金會919",value:c.love_code,onChange:e=>r("love_code",e.target.value)}),(0,l.jsx)("label",{children:(0,o.__)("愛心碼","woocommerce")})]}),"3"===c.vehicle_type&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"wc-block-components-text-input is-active",children:[(0,l.jsx)("input",{name:"buyer_bill_no",id:"buyer_bill_no",type:"text",maxLength:"8",value:c.buyer_bill_no,onChange:e=>r("buyer_bill_no",e.target.value)}),(0,l.jsx)("label",{children:(0,o.__)("統一編號","woocommerce")})]}),(0,l.jsxs)("div",{className:"wc-block-components-text-input is-active",children:[(0,l.jsx)("input",{name:"buyer_invoice_title",id:"buyer_invoice_title",type:"text",maxLength:"161",value:c.buyer_invoice_title,onChange:e=>r("buyer_invoice_title",e.target.value)}),(0,l.jsx)("label",{children:(0,o.__)("發票抬頭","woocommerce")})]})]})]})},save:()=>null})})();
//# sourceMappingURL=ccat-block.js.map